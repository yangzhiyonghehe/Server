(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9566e160"],{"0f9f":function(e,t,n){"use strict";var a=n("fde0"),r=n.n(a);r.a},"154a":function(e,t,n){},"3aa2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("bpmn",{attrs:{"xml-data":e.xml,conditions:e.conditions}})],1)},r=[],i=n("4bf8b"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"containers"},[n("div",{ref:"canvas",staticClass:"canvas"}),e._v(" "),e.bpmnModeler?n("panel",{attrs:{modeler:e.bpmnModeler,organizes:e.organizes,conditions:e.conditions}}):e._e(),e._v(" "),n("div",{staticClass:"toolbar"},[n("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-finished"},on:{click:e.save}},[e._v("保存流程")])],1)],1)},s=[],c=n("7024"),l=n("3fb5"),u=n.n(l);function d(e,t,n,a,r){this.create=t,this.elementFactory=n,this.globalConnect=a,this.bpmnFactory=r,e.registerProvider(this)}d.$inject=["palette","create","elementFactory","globalConnect","bpmnFactory"],d.prototype.getPaletteEntries=function(e){var t=this.create,n=this.elementFactory,a=this.bpmnFactory;function r(){return function(e){var r=a.create("bpmn:Task",{custom:2}),i=n.createShape({type:"bpmn:Task",businessObject:r});t.start(e,i)}}function i(){return function(e){var a=n.createShape({type:"bpmn:StartEvent"});t.start(e,a)}}function o(){return function(e){var a=n.createShape({type:"bpmn:EndEvent"});t.start(e,a)}}function s(){return function(e){var a=n.createShape({type:"bpmn:ExclusiveGateway"});t.start(e,a)}}return{"":{},"create.start-event":{group:"event",className:"bpmn-icon-start-event-none",title:"创建开始节点",action:{dragstart:i(),click:i()}},"create.end-event":{group:"event",className:"bpmn-icon-end-event-none",title:"创建结束节点",action:{dragstart:o(),click:o()}},"create.task":{group:"event",className:"bpmn-icon-task",title:"创建任务",action:{dragstart:r(),click:r()}},"create.exclusive-gateway":{group:"gateway",className:"bpmn-icon-gateway-none",title:"创建一个网关",action:{dragstart:s(),click:s()}}}};var f=n("db72"),m=(n("6762"),n("2fdb"),n("9036")),p=(n("87f2"),n("6b8b")),h=["bpmn:Task","bpmn:StartEvent"],v={};function b(e,t,n){m["a"].call(this,e,2e3);t.computeStyle;this.drawCustomElements=function(e,t){var n=t.type;if("label"!==n){if(h.includes(n)){var a=v[n],r=a.url,i=a.attr,o=Object(p["f"])("image",Object(f["a"])({},i,{href:r}));return t["width"]=i.width,t["height"]=i.height,Object(p["a"])(e,o),o}var s=this.bpmnRenderer.drawShape(e,t);return s}}}u()(b,m["a"]),b.$inject=["eventBus","styles","textRenderer"],b.prototype.canRender=function(e){return!0},b.prototype.drawShape=function(e,t){},b.prototype.getShapePath=function(e){};var g=n("4360");function y(e,t,n,a,r,i,o,s,c){this.create=o,this.elementFactory=i,this.translate=a,this.bpmnFactory=r,this.modeling=s,this.connect=c,t=t||{},!1!==t.autoPlace&&(this.autoPlace=n.get("autoPlace",!1)),e.registerProvider(this)}y.$inject=["contextPad","config","injector","translate","bpmnFactory","elementFactory","create","modeling","connect"],y.prototype.getContextPadEntries=function(e){var t=this.autoPlace,n=this.create,a=this.elementFactory,r=this.translate,i=this.modeling;function o(t){i.removeElements([e])}function s(t){g["a"].commit("SETNODEINFO",e),g["a"].commit("TOGGLENODEVISIBLE",!0)}function c(e,n){if(t){var r=a.createShape({type:"bpmn:Task"});t.append(n,r)}else l(e,n)}function l(t){var r=a.createShape({type:"bpmn:Task"});n.start(t,r,e)}function u(){return{group:"edit",className:"icon-custom icon-custom-edit",title:r("编辑"),action:{click:s}}}function d(){return{group:"edit",className:"icon-custom icon-custom-delete",title:r("删除"),action:{click:o}}}return{"bpmn:UserTask":{group:"model",className:"icon-custom lindaidai-task",title:r("创建一个类型为lindaidai-task的任务节点"),action:{click:c,dragstart:l}},"append.lindaidai-task":{group:"model",className:"icon-custom lindaidai-task",title:r("创建一个类型为lindaidai-task的任务节点"),action:{click:c,dragstart:l}},edit:u(),delete:d()}};n("a481");var k={"Append Task":"添加流程","Append Gateway":"添加网关","Append EndEvent":"添加结束流程","Change type":"修改属性","Connect using Sequence/MessageFlow or Association":"连接状态","Append TextAnnotation":"添加注释",Remove:"删除",Task:"普通任务","Send Task":"抄送任务","Default Flow":"默认流程","User Task":"审批任务"};function _(e,t){return t=t||{},e=k[e]||e,e.replace(/{([^}]+)}/g,(function(e,n){return t[n]||"{"+n+"}"}))}var O={__init__:["paletteProvider"],paletteProvider:["type",d],translate:["value",_]};function x(e){c["a"].call(this,e),this._customElements=[]}u()(x,c["a"]),x.prototype._modules=[].concat(x.prototype._modules,[O]);var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"propertyPanel",staticClass:"property-panel"},[n("el-form",{attrs:{inline:!0,"label-position":"top",model:e.form,"label-width":"100px",size:"small"}},["StartEvent"===e.currentNode?n("start-event",{attrs:{form:e.form,organizes:e.organizes}}):e._e(),e._v(" "),"Task"===e.currentNode?n("task",{attrs:{organizes:e.organizes,form:e.form,element:e.element}}):e._e(),e._v(" "),"UserTask"===e.currentNode?n("user-task",{attrs:{organizes:e.organizes,form:e.form,element:e.element}}):e._e(),e._v(" "),"SendTask"===e.currentNode?n("send-task",{attrs:{organizes:e.organizes,form:e.form,element:e.element}}):e._e(),e._v(" "),"SequenceFlow"===e.currentNode?n("sequence-flow",{attrs:{conditions:e.conditions,form:e.form,element:e.element,organizes:e.organizes}}):e._e()],1)],1)},w=[],S=(n("28a5"),n("7f7f"),n("ac6a"),n("6b54"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"可用部门"}},[n("el-select",{staticStyle:{"margin-left":"20px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:function(t){return e.setAttr({applicantOrg:t})}},model:{value:e.form.applicantOrg,callback:function(t){e.$set(e.form,"applicantOrg",t)},expression:"form.applicantOrg"}},e._l(e.orgOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),n("el-form-item",{staticStyle:{width:"100%"}},[[n("div",{staticClass:"custlabel"},[n("em",[e._v("可用人员")]),n("span",[e._v("可选")])])],e._v(" "),n("div",{staticStyle:{width:"100%","max-height":"300px","overflow-y":"auto"}},[n("el-tree",{ref:"tree",attrs:{data:e.organizes,"show-checkbox":"","node-key":"id","default-expand-all":!0,props:{children:"children",label:"name"},"default-checked-keys":e.form.applicants},on:{"check-change":e.checkChange}})],1)],2)],1)}),$=[],C=n("75fc"),T={name:"PropertyPanelStartEvent",props:{organizes:{type:Array,required:!0,default:function(){}},form:{type:Object,default:function(){}}},data:function(){return{orgOptions:[],orgValue:[]}},mounted:function(){this.orgOptions=this.parseOrganizes(this.organizes)},methods:{setAttr:function(e){this.$parent.$parent.updateProperties(e)},checkChange:function(e,t,n){var a=[];this.$refs.tree.getCheckedKeys().forEach((function(e){e.toString().indexOf("org-")<0&&a.push(e)})),this.setAttr({applicants:a})},parseOrganizes:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[];return e.forEach((function(e){e.id&&e.id.toString().indexOf("org-")>=0&&(a.push({label:n+e.name,value:e.id}),e.children&&e.children.length>0&&a.concat.apply(a,Object(C["a"])(t.parseOrganizes(e.children,"-".concat(n)))))})),a}}},E=T,P=(n("e155"),n("2877")),A=Object(P["a"])(E,S,$,!1,null,"c0848e0e",null),z=A.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"custPanel"},[n("div",{},[e._v("自定义选择审批人/抄送人")]),e._v(" "),n("el-divider",[e._v("暂未开放")]),e._v(" "),n("div",[e._v("请点击扳手修改为其他任务类型")])],1)},N=[],M=(n("456d"),{name:"PropertyPanelTask",props:{organizes:{type:Array,required:!0,default:function(){}},form:{type:Object,default:function(){}},element:{type:Object,default:function(){}}},data:function(){return{incharges:[],persons:[]}},methods:{checkChange:function(e,t,n){var a=[];this.$refs.tree.getCheckedKeys().forEach((function(e){e.toString().indexOf("org-")<0&&a.push(e)})),this.addUser({assignee:a})},addUser:function(e){this.$parent.$parent.updateProperties(Object.assign(e,{userType:Object.keys(e)[0]}))},setAttr:function(e){this.$parent.$parent.updateProperties(e)},typeChange:function(e){var t=this,n=["incharge","assignee","applyer"];n.forEach((function(e){delete t.element.businessObject.$attrs[e],delete t.form[e]})),this.setAttr({userType:e})}}}),q=M,L=(n("61fa"),Object(P["a"])(q,F,N,!1,null,"1f848d9c",null)),U=L.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"审批人员"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.typeChange},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},[n("el-option",{attrs:{value:"incharge",label:"上级主管"}}),e._v(" "),n("el-option",{attrs:{value:"assignee",label:"指定人员"}}),e._v(" "),n("el-option",{attrs:{value:"applyer",label:"申请人"}})],1)],1),e._v(" "),"incharge"===e.form.userType?n("el-form-item",{attrs:{label:"上级主管"}},[n("el-select",{key:"1",attrs:{placeholder:"请选择"},on:{change:function(t){return e.addUser({incharge:t})}},model:{value:e.form.incharge,callback:function(t){e.$set(e.form,"incharge",t)},expression:"form.incharge"}},e._l(e.incharges,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),"assignee"===e.form.userType?n("el-form-item",{staticStyle:{width:"100%"}},[[n("div",{staticClass:"custlabel"},[n("em",[e._v("指定人员")])])],e._v(" "),n("div",{staticStyle:{width:"100%","max-height":"300px","overflow-y":"auto"}},[n("el-tree",{ref:"tree",attrs:{data:e.organizes,"show-checkbox":"","node-key":"id","default-expand-all":!0,props:{children:"children",label:"name"},"default-checked-keys":e.form.assignee},on:{"check-change":e.checkChange}})],1)],2):e._e(),e._v(" "),"incharge"===e.form.userType||"assignee"===e.form.userType?n("el-form-item",{staticStyle:{width:"100%"}},[[n("div",{staticClass:"custlabel"},[n("em",[e._v("多人审批方式")])])],e._v(" "),n("div",[n("el-radio",{attrs:{label:"1"},on:{change:function(t){return e.setAttr({multiMode:t})}},model:{value:e.form.multiMode,callback:function(t){e.$set(e.form,"multiMode",t)},expression:"form.multiMode"}},[e._v("会签（ 须所有成员同意 ）")]),e._v(" "),n("el-radio",{attrs:{label:"0"},on:{change:function(t){return e.setAttr({multiMode:t})}},model:{value:e.form.multiMode,callback:function(t){e.$set(e.form,"multiMode",t)},expression:"form.multiMode"}},[e._v("或签（ 一名成员同意即可 ）")])],1)],2):e._e()],1)},I=[],K={name:"PropertyPanelUserTask",props:{organizes:{type:Array,required:!0,default:function(){}},form:{type:Object,default:function(){}},element:{type:Object,default:function(){}}},data:function(){return{incharges:[{value:"1",label:"直接上级"},{value:"2",label:"第二级主管"},{value:"3",label:"第三级主管"},{value:"4",label:"第四级主管"},{value:"5",label:"第五级主管"},{value:"6",label:"第六级主管"},{value:"7",label:"第七级主管"},{value:"8",label:"第八级主管"},{value:"9",label:"第九级主管"}],persons:[]}},methods:{checkChange:function(e,t,n){var a=[];this.$refs.tree.getCheckedKeys().forEach((function(e){e.toString().indexOf("org-")<0&&a.push(e)})),this.addUser({assignee:a})},addUser:function(e){this.$parent.$parent.updateProperties(Object.assign(e,{userType:Object.keys(e)[0]}))},setAttr:function(e){this.$parent.$parent.updateProperties(e)},typeChange:function(e){var t=this,n=["incharge","assignee","applyer"];n.forEach((function(e){delete t.element.businessObject.$attrs[e],delete t.form[e]})),this.setAttr({userType:e})}}},R=K,B=(n("94ce"),Object(P["a"])(R,D,I,!1,null,"1d34b16b",null)),G=B.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{attrs:{label:"抄送人员"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.typeChange},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},[n("el-option",{attrs:{value:"incharge",label:"上级主管"}}),e._v(" "),n("el-option",{attrs:{value:"assignee",label:"指定人员"}})],1)],1),e._v(" "),"incharge"===e.form.userType?n("el-form-item",{attrs:{label:"上级主管"}},[n("el-select",{key:"1",attrs:{placeholder:"请选择"},on:{change:function(t){return e.addUser({incharge:t})}},model:{value:e.form.incharge,callback:function(t){e.$set(e.form,"incharge",t)},expression:"form.incharge"}},e._l(e.incharges,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),e._v(" "),"assignee"===e.form.userType?n("el-form-item",{staticStyle:{width:"100%"}},[[n("div",{staticClass:"custlabel"},[n("em",[e._v("指定人员")])])],e._v(" "),n("div",{staticStyle:{width:"100%","max-height":"300px","overflow-y":"auto"}},[n("el-tree",{ref:"tree",attrs:{data:e.organizes,"show-checkbox":"","node-key":"id","default-expand-all":!0,props:{children:"children",label:"name"},"default-checked-keys":e.form.assignee},on:{"check-change":e.checkChange}})],1)],2):e._e()],1)},V=[],X={name:"PropertyPanelSendTask",props:{organizes:{type:Array,required:!0,default:function(){}},form:{type:Object,default:function(){}},element:{type:Object,default:function(){}}},data:function(){return{incharges:[{value:"1",label:"直接上级"},{value:"2",label:"第二级主管"},{value:"3",label:"第三级主管"},{value:"4",label:"第四级主管"},{value:"5",label:"第五级主管"},{value:"6",label:"第六级主管"},{value:"7",label:"第七级主管"},{value:"8",label:"第八级主管"},{value:"9",label:"第九级主管"}],persons:[]}},methods:{checkChange:function(e,t,n){var a=[];this.$refs.tree.getCheckedKeys().forEach((function(e){e.toString().indexOf("org-")<0&&a.push(e)})),this.addUser({assignee:a})},addUser:function(e){this.$parent.$parent.updateProperties(Object.assign(e,{userType:Object.keys(e)[0]}))},setAttr:function(e){this.$parent.$parent.updateProperties(e)},typeChange:function(e){var t=this,n=["incharge","assignee"];n.forEach((function(e){delete t.element.businessObject.$attrs[e],delete t.form[e]})),this.setAttr({userType:e})}}},H=X,W=(n("b34d"),Object(P["a"])(H,J,V,!1,null,"2d5468dc",null)),Q=W.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:""}},[[n("div",{staticClass:"custlabel"},[n("em",[e._v("优先级")]),n("span",[e._v("多个匹配条件时使用")])])],e._v(" "),n("el-input-number",{attrs:{label:"请填写",size:"mini"},on:{change:function(t){return e.setAttr({priority:t})}},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})],2),e._v(" "),n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"可用条件"}},[n("el-checkbox-group",{on:{change:function(t){return e.setAttr({checkCondition:t})}},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.conditions,(function(e,t){return n("el-checkbox",{key:t,attrs:{label:e.label}})})),1)],1),e._v(" "),e._l(e.conditions,(function(t,a){return[e.checked(t)?n("el-form-item",{key:a,staticStyle:{width:"100%"},attrs:{label:t.label}},["user"===t.type?n("div",{staticStyle:{width:"100%","max-height":"300px","overflow-y":"auto"}},[n("el-tree",{ref:"tree",refInFor:!0,attrs:{data:e.organizes,"show-checkbox":"","node-key":"id","default-expand-all":!0,props:{children:"children",label:"name"},"default-checked-keys":e.form.user},on:{"check-change":e.checkChange}})],1):"group"===t.type?n("div",[n("el-checkbox-group",{on:{change:function(n){var a;return e.setAttr((a={},a[t.name]=e.form[t.name],a))}},model:{value:e.form[t.name],callback:function(n){e.$set(e.form,t.name,n)},expression:"form[condition.name]"}},e._l(t.options,(function(e){return n("el-checkbox",{key:e,attrs:{label:e}})})),1)],1):"number"===t.type?n("div",[n("el-col",{staticStyle:{margin:"0 0 10px 0"},attrs:{span:24}},[n("el-select",{attrs:{placeholder:"选择条件"},on:{change:function(n){var a;return e.setAttr((a={},a[t.name]=e.form[t.name],a))}},model:{value:e.form[""+t.name],callback:function(n){e.$set(e.form,""+t.name,n)},expression:"form[`${condition.name}`]"}},e._l(e.numberCondition,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),n("el-col",{attrs:{span:11}},[n("el-input",{attrs:{placeholder:"请填写"},on:{change:function(n){var a;return e.setAttr((a={},a[t.name+"_1"]=e.form[t.name+"_1"],a))}},model:{value:e.form[t.name+"_1"],callback:function(n){e.$set(e.form,t.name+"_1",n)},expression:"form[`${condition.name}_1`]"}},[t.suffix?n("template",{slot:"append"},[e._v(e._s(t.suffix))]):e._e()],2)],1),e._v(" "),"between"===e.form[""+t.name]?n("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]):e._e(),e._v(" "),"between"===e.form[""+t.name]?n("el-col",{attrs:{span:11}},[n("el-input",{attrs:{placeholder:"请填写"},on:{change:function(n){var a;return e.setAttr((a={},a[t.name+"_2"]=e.form[t.name+"_2"],a))}},model:{value:e.form[t.name+"_2"],callback:function(n){e.$set(e.form,t.name+"_2",n)},expression:"form[`${condition.name}_2`]"}},[t.suffix?n("template",{slot:"append"},[e._v(e._s(t.suffix))]):e._e()],2)],1):e._e()],1):e._e()]):e._e()]}))],2)},Z=[],ee=n("bd86"),te={name:"PropertyPanelSequenceFlow",props:{organizes:{type:Array,required:!0,default:function(){}},form:{type:Object,default:function(){}},element:{type:Object,default:function(){}},conditions:{type:Array,default:function(){}}},data:function(){return{persons:[],checkList:[],numberCondition:[{label:"大于",value:">"},{label:"大于等于",value:">="},{label:"小于",value:"<"},{label:"小于等于",value:"<="},{label:"等于",value:"="},{label:"介于",value:"between"}],myform:{}}},watch:{"form.checkCondition":{deep:!0,handler:function(e,t){this.changed()}}},computed:{},mounted:function(){this.changed()},methods:{changed:function(){this.form["checkCondition"]?this.form["checkCondition"]&&"string"===typeof this.form["checkCondition"]?this.checkList=this.form["checkCondition"].split(","):this.checkList=this.form["checkCondition"]:this.checkList=[]},changeNumber:function(e){this.setAttr(Object(ee["a"])({},e.name,this.form[e.name]))},checked:function(e){return this.checkList.some((function(t){return t===e.label}))},checkChange:function(e,t,n){var a=[];this.$refs.tree[0].getCheckedKeys().forEach((function(e){e.toString().indexOf("org-")<0&&a.push(e)})),this.setAttr({user:a})},addUser:function(e){this.$parent.$parent.updateProperties(Object.assign(e,{userType:Object.keys(e)[0]}))},setAttr:function(e){this.$parent.$parent.updateProperties(e)},typeChange:function(e){var t=this,n=["incharge","assignee","applyer"];n.forEach((function(e){delete t.element.businessObject.$attrs[e],delete t.form[e]})),this.setAttr({userType:e})}}},ne=te,ae=(n("4cc4"),Object(P["a"])(ne,Y,Z,!1,null,"4617dae4",null)),re=ae.exports,ie={name:"PropertyPanel",components:{StartEvent:z,Task:U,UserTask:G,SendTask:Q,SequenceFlow:re},props:{modeler:{type:Object,required:!0,default:function(){}},organizes:{type:Array,required:!0,default:function(){}},conditions:{type:Array,required:!0,default:function(){}}},data:function(){return{form:{id:"",name:"",color:null},element:{}}},computed:{currentNode:function(){if(!this.element||!this.element.type)return"";var e=this.element.type.toString();return e.indexOf("bpmn:")>=0?e.substring(5):""},userTask:function(){if(this.element)return"bpmn:UserTask"===this.element.type||"bpmn:StartEvent"===this.element.type},sequenceFlow:function(){if(this.element)return"bpmn:SequenceFlow"===this.element.type}},mounted:function(){this.handleModeler()},methods:{initSequenceFlow:function(){var e=this;if(this.form.id.indexOf("SequenceFlow_")<0)return"";this.conditions.forEach((function(t){e.form[t.name]?"number"!==t.type&&(e.form[t.name]=e.strSplit(e.form[t.name])):(e.form[t.name]=[],"number"===t.type&&(e.form["".concat(t.name,"_1")]=[],e.form["".concat(t.name,"_2")]=[]))}))},strSplit:function(e){return e&&e.split(",")||[]},initStartEvent:function(){if(this.form.id.indexOf("StartEvent_")<0)return"";this.form.applicants=this.strSplit(this.form.applicants),this.form.applicantOrg=this.strSplit(this.form.applicantOrg)},initTask:function(){if(this.form.id.indexOf("Task_")<0)return"";"assignee"===this.form.userType&&(this.form["assignee"]=this.strSplit(this.form["assignee"]))},handleModeler:function(){var e=this;this.modeler.on("selection.changed",(function(t){var n=t.newSelection[0];e.element=n,n&&(e.form=Object(f["a"])({},n.businessObject,{},n.businessObject.$attrs),e.initStartEvent(),e.initSequenceFlow(),e.initTask())})),this.modeler.on("element.changed",(function(t){var n=t.element;n&&n.id===e.form.id&&(e.form.name=n.businessObject.name,e.form=Object(f["a"])({},e.form))}))},nameChange:function(e){var t=this.modeler.get("modeling");t.updateLabel(this.element,e)},colorChange:function(e){var t=this.modeler.get("modeling");t.setColor(this.element,{fill:null,stroke:e}),t.updateProperties(this.element,{color:e})},updateProperties:function(e){var t=this.modeler.get("modeling");t.updateProperties(this.element,e),this.form=Object.assign(this.form,e)}}},oe=ie,se=(n("0f9f"),Object(P["a"])(oe,j,w,!1,null,"ab6f29e2",null)),ce=se.exports,le=n("d225"),ue=n("b0b4"),de=function(){function e(){Object(le["a"])(this,e),this.controls=[],this.init()}return Object(ue["a"])(e,[{key:"init",value:function(){this.controls=[{action:"create.start-event",title:"开始"},{action:"create.intermediate-event",title:"中间"},{action:"create.end-event",title:"结束"},{action:"create.exclusive-gateway",title:"网关"},{action:"create.task",title:"任务"},{action:"create.user-task",title:"用户任务"},{action:"create.user-sign-task",title:"会签任务"},{action:"create.subprocess-expanded",title:"子流程"},{action:"create.data-object",title:"数据对象"},{action:"create.data-store",title:"数据存储"},{action:"create.participant-expanded",title:"扩展流程"},{action:"create.group",title:"分组"}]}},{key:"getControl",value:function(e){var t=this.controls.filter((function(t){return t.action===e}));return t[0]||{}}}]),e}(),fe=n("3f6e"),me={components:{panel:ce},props:{xmlData:{type:String,default:""},conditions:{type:Array,required:!0,default:function(){}}},data:function(){return{bpmnModeler:null,element:null,bpmData:new de,xml:null,organizes:[]}},watch:{xmlData:function(e){this.xml=e,this.createNewDiagram()}},created:function(){var e=this;Object(fe["f"])().then((function(t){e.organizes=t.data}))},mounted:function(){var e=this.$refs.canvas;this.bpmnModeler=new x({container:e}),this.createNewDiagram()},methods:{save:function(){this.$parent.save(this.xml)},addBpmnListener:function(){var e=this;this.bpmnModeler.on("commandStack.changed",(function(t){e.saveDiagram((function(t){e.xml=t}))}))},saveDiagram:function(e){this.bpmnModeler.saveXML({format:!0},(function(t,n){e(n)}))},createNewDiagram:function(){var e=this,t=this.xmlData;t&&this.bpmnModeler.importXML(t,(function(t){t||(e.addBpmnListener(),e.adjustPalette())}))},adjustPalette:function(){try{var e=this.$refs.canvas,t=e.children[0].children[1].children[4],n={width:"130px",padding:"5px",background:"white",left:"20px",borderRadius:0};for(var a in n)t.style[a]=n[a];var r=t.children[0],i=r.children;for(var o in i[0].style["display"]="none",i){var s=i[o];for(var c in s.children){var l=s.children[c],u={display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",padding:"5px"};if(l.className&&l.dataset&&-1!==l.className.indexOf("entry")){var d=this.bpmData.getControl(l.dataset.action);for(var f in l.innerHTML="<div style='font-size: 14px;font-weight:500;margin-left:15px;'>".concat(d["title"],"</div>"),u)l.style[f]=u[f]}}}}catch(m){}}}},pe=me,he=(n("5788"),Object(P["a"])(pe,o,s,!1,null,null,null)),ve=he.exports,be={name:"WorkflowFlow",components:{bpmn:ve},data:function(){return{conditions:[],xml:"",id:null,module:""}},mounted:function(){var e=this,t=this.$route.params;this.id=t.id,Object(i["a"])(this.id).then((function(t){e.xml=t.data["xml"],e.conditions=t.data["conditions"],e.module=t.data["module"]}))},methods:{save:function(e){var t=this;Object(i["f"])({module:this.module,xml:e,id:this.id}).then((function(e){t.$notify({title:t.$t("table.successTitle"),message:t.$t("table.updateSuccess"),type:"success",duration:2e3})}))}}},ge=be,ye=Object(P["a"])(ge,a,r,!1,null,null,null);t["default"]=ye.exports},"3f6e":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"j",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"d",(function(){return m}));var a=n("b775");function r(e){return Object(a["a"])({url:"/person/list",method:"get",params:e})}function i(e){return Object(a["a"])({url:"/person/update",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/person/create",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/person/delete",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/person/personSelectedDevice",method:"post",params:e})}function l(e){return Object(a["a"])({url:"/person/personOrgOptions",method:"post",params:e})}function u(e){return Object(a["a"])({url:"/person/sync",method:"post",hiddenMsg:!0,data:e})}function d(e){return Object(a["a"])({url:"/person/bindAdmin",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/person/unbind",method:"post",data:{company_id:e}})}function m(e){return Object(a["a"])({url:"/person/fetchAdmin",method:"post",data:e})}},"4bf8b":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return u}));var a=n("b775");function r(e){return Object(a["a"])({url:"/flow/form",method:"get",params:{id:e}})}function i(e){return Object(a["a"])({url:"/flow/saveform",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/flow/list",method:"get",params:e})}function s(e){return Object(a["a"])({url:"/flow/saveApp",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/flow/delete",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/flow/saveFlow",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/flow/fetch",method:"get",params:{id:e}})}},"4cc4":function(e,t,n){"use strict";var a=n("995d"),r=n.n(a);r.a},5788:function(e,t,n){"use strict";var a=n("154a"),r=n.n(a);r.a},"61fa":function(e,t,n){"use strict";var a=n("81b5"),r=n.n(a);r.a},"78c8":function(e,t,n){},"81b5":function(e,t,n){},8935:function(e,t,n){},"94ce":function(e,t,n){"use strict";var a=n("78c8"),r=n.n(a);r.a},"995d":function(e,t,n){},ac12:function(e,t,n){},b34d:function(e,t,n){"use strict";var a=n("ac12"),r=n.n(a);r.a},e155:function(e,t,n){"use strict";var a=n("8935"),r=n.n(a);r.a},fde0:function(e,t,n){}}]);